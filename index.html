<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>불규칙 동사 연습</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#60a5fa;--muted:#9aa6bf;--ok:#22c55e;--bad:#ef4444}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071427 0%, #081426 100%);display:flex;align-items:center;justify-content:center;color:#e6eef8}
    .wrap{width:100%;max-width:760px;padding:20px;box-sizing:border-box}
    .card{background:rgba(255,255,255,0.03);border-radius:14px;padding:28px;box-shadow:0 8px 30px rgba(2,6,23,0.6);min-height:320px;display:flex;flex-direction:column;align-items:center;justify-content:center}
    h1{margin:0 0 14px;font-weight:600;font-size:20px}
    .center{display:flex;flex-direction:column;align-items:center;gap:12px}

    button.primary{background:var(--accent);border:none;color:#04233b;padding:12px 22px;border-radius:12px;font-weight:600;font-size:16px}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:10px 16px;border-radius:10px}

    .verb{font-size:56px;letter-spacing:1px;margin:6px 0}
    .small{font-size:14px;color:var(--muted)}

    .inputRow{display:flex;gap:8px;width:100%;max-width:520px}
    input[type=text]{flex:1;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:inherit;font-size:16px}
    .hint{margin-top:12px;font-size:15px;color:var(--muted)}

    .result{margin-top:14px;font-weight:600}
    .result.ok{color:var(--ok)}
    .result.bad{color:var(--bad)}

    .controls{margin-top:18px;display:flex;gap:8px}

    /* exit button */
    .exit{position:fixed;right:18px;bottom:18px;background:rgba(0,0,0,0.5);border-radius:999px;padding:10px 14px;border:1px solid rgba(255,255,255,0.06);backdrop-filter:blur(6px);color:var(--muted)}

    @media (max-width:520px){
      .verb{font-size:44px}
      .card{padding:18px}
      input[type=text]{font-size:15px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="app">
      <!-- main screen -->
      <div id="mainScreen" class="center">
        <h1>불규칙 과거형 연습</h1>
        <p class="small">가운데 시작 버튼을 눌러 문제를 시작하세요. 모바일에서 사용가능.</p>
        <button class="primary" id="startBtn">시작</button>
      </div>

      <!-- quiz screen -->
      <div id="quizScreen" class="center" style="display:none;">
        <h1 id="promptTitle">다음 동사의 과거형을 입력하세요</h1>
        <div class="verb" id="baseVerb">go</div>
        <div class="inputRow">
          <input id="answerInput" type="text" placeholder="과거형을 입력하세요 (예: went)" autocomplete="off" autocapitalize="none" autocorrect="off" spellcheck="false">
          <button class="primary" id="submitBtn">제출</button>
        </div>
        <div class="hint small">정답이면 바로 다음 문제로 넘어갑니다. 틀리면 정답을 보여줍니다.</div>
        <div id="result" class="result" aria-live="polite"></div>
        <div class="controls" id="controls" style="display:none;">
          <button class="ghost" id="nextBtn">다음</button>
        </div>
      </div>

    </div>
  </div>

  <button id="exitBtn" class="exit" style="display:none">종료</button>

  <script>
    // 불규칙 동사 목록 (base, past). past는 문자열 또는 배열(허용되는 여러 형태)
    const verbs = [
      {b:'begin', p:'began'},
      {b:'break', p:'broke'},
      {b:'bring', p:'brought'},
      {b:'build', p:'built'},
      {b:'buy', p:'bought'},
      {b:'catch', p:'caught'},
      {b:'choose', p:'chose'},
      {b:'come', p:'came'},
      {b:'do', p:'did'},
      {b:'drink', p:'drank'},
      {b:'drive', p:'drove'},
      {b:'eat', p:'ate'},
      {b:'fall', p:'fell'},
      {b:'feel', p:'felt'},
      {b:'find', p:'found'},
      {b:'fly', p:'flew'},
      {b:'forget', p:'forgot'},
      {b:'get', p:'got'},
      {b:'give', p:'gave'},
      {b:'go', p:'went'},
      {b:'have', p:'had'},
      {b:'hear', p:'heard'},
      {b:'hold', p:'held'},
      {b:'keep', p:'kept'},
      {b:'know', p:'knew'},
      {b:'leave', p:'left'},
      {b:'lend', p:'lent'},
      {b:'let', p:'let'},
      {b:'lie', p:['lay','lied']},
      {b:'lose', p:'lost'},
      {b:'make', p:'made'},
      {b:'meet', p:'met'},
      {b:'pay', p:'paid'},
      {b:'put', p:'put'},
      {b:'read', p:'read'},
      {b:'ride', p:'rode'},
      {b:'ring', p:'rang'},
      {b:'run', p:'ran'},
      {b:'say', p:'said'},
      {b:'see', p:'saw'},
      {b:'sell', p:'sold'},
      {b:'send', p:'sent'},
      {b:'shake', p:'shook'},
      {b:'shine', p:'shone'},
      {b:'shoot', p:'shot'},
      {b:'shut', p:'shut'},
      {b:'sing', p:'sang'},
      {b:'sit', p:'sat'},
      {b:'sleep', p:'slept'},
      {b:'speak', p:'spoke'},
      {b:'spend', p:'spent'},
      {b:'stand', p:'stood'},
      {b:'steal', p:'stole'},
      {b:'swim', p:'swam'},
      {b:'take', p:'took'},
      {b:'teach', p:'taught'},
      {b:'tell', p:'told'},
      {b:'think', p:'thought'},
      {b:'throw', p:'threw'},
      {b:'understand', p:'understood'},
      {b:'wake', p:'woke'},
      {b:'wear', p:'wore'},
      {b:'win', p:'won'},
      {b:'write', p:'wrote'}
    ];

    // UI elements
    const mainScreen = document.getElementById('mainScreen');
    const quizScreen = document.getElementById('quizScreen');
    const startBtn = document.getElementById('startBtn');
    const baseVerbEl = document.getElementById('baseVerb');
    const answerInput = document.getElementById('answerInput');
    const submitBtn = document.getElementById('submitBtn');
    const resultEl = document.getElementById('result');
    const controls = document.getElementById('controls');
    const nextBtn = document.getElementById('nextBtn');
    const exitBtn = document.getElementById('exitBtn');

    let current = null;
    let prevIndex = -1;

    function pickRandom() {
      if (verbs.length === 0) return null;
      let i;
      do { i = Math.floor(Math.random() * verbs.length); } while (i === prevIndex && verbs.length > 1);
      prevIndex = i;
      return verbs[i];
    }

    function showMain(){
      quizScreen.style.display = 'none';
      mainScreen.style.display = 'flex';
      exitBtn.style.display = 'none';
      resultEl.textContent = '';
      answerInput.value = '';
    }

    function startQuiz(){
      mainScreen.style.display = 'none';
      quizScreen.style.display = 'flex';
      exitBtn.style.display = 'block';
      nextProblem();
      answerInput.focus();
    }

    function normalize(s){
      return String(s||'').trim().toLowerCase();
    }

    function isCorrect(input, past){
      const got = normalize(input);
      const accepted = Array.isArray(past) ? past : [past];
      return accepted.map(normalize).includes(got);
    }

    function showCorrectAnswer(past){
      const accepted = Array.isArray(past) ? past : [past];
      return accepted.join(' / ');
    }

    function nextProblem(){
      current = pickRandom();
      baseVerbEl.textContent = current.b;
      resultEl.textContent = '';
      resultEl.className = 'result';
      controls.style.display = 'none';
      answerInput.disabled = false;
      submitBtn.disabled = false;
      answerInput.value = '';
      answerInput.focus();
    }

    startBtn.addEventListener('click', startQuiz);
    exitBtn.addEventListener('click', ()=>{
      showMain();
    });

    function handleSubmit(){
      const user = answerInput.value;
      if (!user.trim()) return;
      // check
      if (isCorrect(user, current.p)){
        resultEl.textContent = '정답! 다음 문제로...';
        resultEl.classList.add('ok');
        // 바로 다음 문제로
        setTimeout(nextProblem, 550);
      } else {
        const correct = showCorrectAnswer(current.p);
        resultEl.textContent = `오답. 정답: ${correct}`;
        resultEl.classList.add('bad');
        // show next 버튼
        controls.style.display = 'flex';
        answerInput.disabled = true;
        submitBtn.disabled = true;
      }
    }

    submitBtn.addEventListener('click', handleSubmit);
    answerInput.addEventListener('keydown', (e)=>{
      if (e.key === 'Enter') { e.preventDefault(); handleSubmit(); }
    });

    nextBtn.addEventListener('click', ()=>{
      nextProblem();
    });

    // initialize main screen
    showMain();
  </script>
</body>
</html>

